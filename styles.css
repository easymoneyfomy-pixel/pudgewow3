:root {
    --gold: #c4a44a;
    --gold-dark: #8a6a2a;
    --gold-glow: #f0d78c;
    --bg-dark: #0f0c08;
    --bg-panel: #1a150e;
    --bg-slot: #151515;
    --red: #ff4444;
    --blue: #4488ff;
    --green: #00aa00;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    user-select: none;
}

body {
    background-color: #000;
    color: #e0e0e0;
    font-family: 'Inter', sans-serif;
    overflow: hidden;
    width: 100vw;
    height: 100vh;
}

.hidden {
    display: none !important;
}

.hide {
    opacity: 0;
    pointer-events: none;
}

/* ================== CANVAS ================== */
#game-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: #000;
    z-index: 1;
}

canvas#gameCanvas {
    display: block;
    width: 100%;
    height: 100%;
}

.game-overlay-vignette {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    box-shadow: inset 0 0 120px rgba(0, 0, 0, 0.85);
}

/* ================== OVERLAYS (Z-INDEX => 100) ================== */
.overlay {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    z-index: 200;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

.menu-box, .game-over-box {
    background: linear-gradient(to bottom, var(--bg-panel), #0a0805);
    border: 3px solid var(--gold);
    box-shadow: 0 0 30px rgba(196, 164, 74, 0.2), inset 0 0 20px #000;
    padding: 50px 80px;
    text-align: center;
    border-radius: 4px;
}

.wc3-title {
    font-family: 'Cinzel', serif;
    font-size: 3.5rem;
    color: var(--gold-glow);
    text-shadow: 0 0 10px rgba(240, 215, 140, 0.5), 2px 2px 4px #000;
    margin-bottom: 5px;
    letter-spacing: 2px;
}

.subtitle {
    font-family: 'Cinzel', serif;
    font-size: 1.2rem;
    color: #888;
    margin-bottom: 40px;
    letter-spacing: 4px;
}

.wc3-button {
    background: linear-gradient(to bottom, #3a2a18, #1a120a);
    border: 2px solid var(--gold-dark);
    color: var(--gold-glow);
    font-family: 'Cinzel', serif;
    font-weight: 700;
    font-size: 1.5rem;
    padding: 15px 40px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-transform: uppercase;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
}

.wc3-button:hover {
    border-color: var(--gold);
    background: linear-gradient(to bottom, #4a3a28, #2a1a0e);
    box-shadow: 0 0 15px rgba(196, 164, 74, 0.4), inset 0 0 10px rgba(0,0,0,0.8);
    transform: scale(1.05);
}

.wc3-button:active {
    transform: scale(0.98);
    background: linear-gradient(to bottom, #1a120a, #0a0502);
}

/* ================== GAME UI (Z-INDEX => 10) ================== */
#game-ui {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: 10;
    pointer-events: none; /* Let clicks pass through to canvas by default */
}

/* TOP HUD */
#hud-top {
    position: absolute;
    top: 0; left: 50%;
    transform: translateX(-50%);
    width: 320px; height: 50px;
    background: linear-gradient(to bottom, rgba(20, 15, 10, 0.95), rgba(40, 30, 20, 0.85));
    border: 2px solid var(--gold);
    border-top: none;
    border-radius: 0 0 8px 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.6);
    pointer-events: auto;
}

.score-box {
    display: flex; align-items: baseline; gap: 8px;
}
.score-box.red-team { color: var(--red); }
.score-box.blue-team { color: var(--blue); }
.score-box .label { font-family: 'Cinzel', serif; font-size: 0.9rem; font-weight: bold; }
.score-box .score { font-size: 1.5rem; font-weight: bold; }

.timer-box {
    color: var(--gold-glow);
    font-family: 'Cinzel', serif;
    font-size: 1.2rem;
    font-weight: bold;
    text-shadow: 1px 1px 2px #000;
}

/* BOTTOM HUD */
#hud-bottom {
    position: absolute;
    bottom: 0; left: 0; width: 100vw; height: 140px;
    pointer-events: auto;
}

.hud-bg {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(to bottom, rgba(15, 12, 8, 0.95), rgba(25, 20, 15, 0.98));
    border-top: 2px solid var(--gold);
    box-shadow: 0 -4px 20px rgba(0,0,0,0.8);
    z-index: 1;
}

.hud-content {
    position: relative; z-index: 2;
    display: flex; align-items: center; justify-content: center;
    height: 100%; padding: 10px; gap: 20px;
}

/* MINIMAP */
#minimap-container {
    width: 120px; height: 120px;
    background: #090909;
    border: 1px solid var(--gold);
    box-shadow: inset 0 0 10px #000;
    position: relative;
}

/* PORTRAIT */
.portrait-area {
    display: flex; gap: 15px; align-items: center;
    width: 280px;
}

.portrait-box {
    position: relative;
    width: 60px; height: 80px;
    background: #111;
    border: 1px solid var(--gold);
    box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
    display: flex; justify-content: center; align-items: center;
}

#portrait-img {
    width: 44px; height: 56px;
    background-color: #660000;
    border-radius: 50%;
    /* In a real project you'd put an image url here */
}

#player-level {
    position: absolute; bottom: -20px;
    color: #ffd700; font-family: 'Cinzel', serif; font-size: 0.8rem; font-weight: bold;
    text-shadow: 1px 1px 2px #000;
}

/* STATS */
.stats-box { flex: 1; display: flex; flex-direction: column; gap: 4px; }
.name-gold { display: flex; justify-content: space-between; align-items: center; }
#player-name { color: var(--gold-glow); font-family: 'Cinzel', serif; font-weight: bold; font-size: 0.9rem;}
.gold { color: #ffd700; font-weight: bold; font-size: 0.85rem;}

.bars { display: flex; flex-direction: column; gap: 4px;}
.bar-container { position: relative; width: 100%; background: #111; border: 1px solid #555; }
.hp-container { height: 16px; border-color: #555;}
.xp-container { height: 8px; border-color: #333;}
.bar-fill { height: 100%; width: 0%; transition: width 0.2s ease;}
.hp-fill { background: linear-gradient(to right, #00aa00, #007700); }
.xp-fill { background: #6644cc; }
.bar-text { position: absolute; width:100%; text-align: center; top:0; left:0; font-size: 10px; font-weight: bold; color: #fff; line-height: 16px; text-shadow: 1px 1px 0 #000;}
.xp-container .bar-text { font-size: 8px; line-height: 8px; color: #ccc;}

.combat-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 2px; font-size: 0.7rem; color: #bbb; margin-top: 4px;}

/* SEC TITLES */
.section-title {
    color: var(--gold); font-family: 'Cinzel', serif; font-size: 0.7rem; font-weight: bold; text-align: center; margin-bottom: 6px;
}

/* SKILLS */
.skills-area { width: 140px; }
.skills-grid { display: flex; gap: 8px; justify-content: center;}

.skill-slot, .inv-slot {
    position: relative;
    width: 40px; height: 40px;
    background: var(--bg-slot);
    border: 1px solid var(--gold-dark);
    box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
    display: flex; justify-content: center; align-items: center;
}

.hotkey {
    position: absolute; top: 2px; left: 4px;
    color: #888; font-size: 0.6rem; font-weight: bold; text-shadow: 1px 1px 0 #000;
}

.cooldown-overlay {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 0%;
    background: rgba(0,0,0,0.75);
    transition: height 0.1s linear;
}
.cooldown-text {
    position: absolute;
    color: #ff0; font-weight: bold; font-size: 0.8rem; text-shadow: 1px 1px 2px #000;
    z-index: 2;
}

.active-glow {
    position: absolute; bottom: -12px;
    color: #0f0; font-size: 0.5rem; font-weight: bold; text-shadow: 0 0 2px #0f0;
}
.border-glow {
    border-color: #0f0 !important;
    box-shadow: 0 0 10px rgba(0,255,0,0.3), inset 0 0 10px rgba(0,255,0,0.2) !important;
}

/* INVENTORY */
.inventory-area { display: flex; gap: 15px; align-items: center;}
.inventory-grid {
    display: grid; grid-template-columns: repeat(3, 40px); grid-gap: 4px;
}
.inv-slot { border-color: #444; } /* Dimmer until item present */
.inv-slot.has-item { border-color: var(--gold); cursor: pointer;}
.inv-slot .item-icon { font-size: 1.2rem; }

.shop-hint { font-size: 0.65rem; color: #888; line-height: 1.5;}

/* ================== SHOP ================== */
#shop-overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.6);
    z-index: 50; display: flex; justify-content: center; align-items: center;
    pointer-events: auto;
}
.shop-panel {
    width: 480px; background: linear-gradient(to bottom, var(--bg-panel), #0d0a06);
    border: 3px solid var(--gold); border-radius: 4px;
    box-shadow: inset 0 0 20px #000, 0 10px 40px rgba(0,0,0,0.8);
    position: relative; padding: 2px;
}

.shop-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; border-bottom: 1px solid var(--gold-dark); background: rgba(0,0,0,0.3);}
.shop-header h2 { font-family: 'Cinzel', serif; color: var(--gold-glow); font-size: 1.2rem; margin: 0;}
.shop-gold { color: #ffd700; font-weight: bold; }
.close-btn { background: none; border: none; color: #888; font-size: 1.2rem; cursor: pointer; transition: color 0.2s;}
.close-btn:hover { color: #fff;}

.shop-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 20px; }

.shop-item {
    background: #151515; border: 1px solid #444; padding: 10px; text-align: center;
    cursor: pointer; transition: all 0.2s ease;
}
.shop-item:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.5);}
.shop-item.affordable { background: #2a2510; border-color: var(--gold); }
.shop-item.affordable:hover { box-shadow: 0 5px 15px rgba(196, 164, 74, 0.2);}
.shop-item.unaffordable { opacity: 0.6; cursor: not-allowed; }

.s-icon { font-size: 2rem; margin-bottom: 5px;}
.s-name { font-size: 0.75rem; font-weight: bold; color: #fff; margin-bottom: 4px;}
.unaffordable .s-name { color: #888; }
.s-desc { font-size: 0.6rem; color: #aaa; margin-bottom: 6px; line-height: 1.2;}
.s-cost { font-size: 0.9rem; font-weight: bold; color: #ffd700; }
.unaffordable .s-cost { color: #554400; }

.shop-upgrades {
    padding: 10px 20px 20px; text-align: center; border-top: 1px solid var(--gold-dark);
}
.shop-upgrades h3 { font-family: 'Cinzel', serif; color: var(--gold); font-size: 0.9rem; margin-bottom: 10px;}
.upgrade-keys { display: flex; justify-content: space-between; font-size: 0.75rem; color: #ccc;}

.shop-footer { text-align: center; padding: 10px; background: rgba(0,0,0,0.5); font-size: 0.75rem; color: #888; border-top: 1px solid #111;}